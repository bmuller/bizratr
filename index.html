<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Bizratr by bmuller</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/bmuller/bizratr">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/bmuller/bizratr/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/bmuller/bizratr/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Bizratr</h1>
          <p>Synthesize business information from many sources</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/bmuller">bmuller</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <h1>BizRatr</h1>

<p>This gem pulls in business data from a variety of sources and synthesizes a singular view of the business.  Right now Yelp, Google Places, and Foursquare are used as sources.  Bizratr will collapse all of the matching sources into a singular view of each matching business.</p>

<div class="highlight"><pre><span class="o">&gt;&gt;</span> <span class="nb">require</span> <span class="s1">'bizratr'</span>
<span class="o">&gt;&gt;</span> <span class="n">config</span> <span class="o">=</span> <span class="p">{</span> 
     <span class="ss">:foursquare</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:client_id</span> <span class="o">=&gt;</span> <span class="s1">'anid'</span><span class="p">,</span> <span class="ss">:client_secret</span> <span class="o">=&gt;</span> <span class="s1">'asecret'</span> <span class="p">},</span>
     <span class="ss">:yelp</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:consumer_key</span> <span class="o">=&gt;</span> <span class="s1">'akey'</span><span class="p">,</span> <span class="ss">:consumer_secret</span> <span class="o">=&gt;</span> <span class="s1">'asecret'</span><span class="p">,</span> 
                <span class="ss">:token</span> <span class="o">=&gt;</span> <span class="s1">'atoken'</span><span class="p">,</span> <span class="ss">:token_secret</span> <span class="o">=&gt;</span> <span class="s1">'atokensecret'</span> <span class="p">},</span>
     <span class="ss">:google_places</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:key</span> <span class="o">=&gt;</span> <span class="s2">"akey"</span> <span class="p">}</span>
   <span class="p">}</span>
<span class="o">&gt;&gt;</span> <span class="n">finder</span> <span class="o">=</span> <span class="no">BizRatr</span><span class="o">::</span><span class="no">Finder</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="o">&gt;&gt;</span> <span class="n">location</span> <span class="o">=</span> <span class="o">[</span><span class="mi">40</span><span class="o">.</span><span class="mi">729401</span><span class="p">,</span> <span class="o">-</span><span class="mi">73</span><span class="o">.</span><span class="mi">996061</span><span class="o">]</span> <span class="c1"># this could be an address</span>
<span class="o">&gt;&gt;</span> <span class="nb">name</span> <span class="o">=</span> <span class="s2">"third rail coffee"</span>
<span class="o">&gt;&gt;</span> <span class="n">matches</span> <span class="o">=</span> <span class="n">finder</span><span class="o">.</span><span class="n">search_location</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="nb">name</span><span class="p">)</span>
<span class="o">&gt;&gt;</span> <span class="n">matches</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">rating</span> <span class="c1"># this will be an average across sources</span>
 <span class="o">=&gt;</span> <span class="mi">4</span><span class="o">.</span><span class="mi">55</span>
<span class="o">&gt;&gt;</span> <span class="n">matches</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">flattened_categories</span>
 <span class="o">=&gt;</span> <span class="o">[</span><span class="s2">"coffee shop"</span><span class="p">,</span> <span class="s2">"food"</span><span class="o">]</span>
<span class="o">&gt;&gt;</span> <span class="n">match</span> <span class="o">=</span> <span class="n">finder</span><span class="o">.</span><span class="n">search_location_strictly</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="nb">name</span><span class="p">)</span> <span class="c1"># best name match</span>
 <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="no">Business</span> <span class="o">[</span><span class="nb">name</span><span class="o">=</span><span class="no">Third</span> <span class="no">Rail</span> <span class="no">Coffee</span><span class="p">,</span> <span class="n">phone</span><span class="o">=</span><span class="mi">6468250812</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="mi">240</span> <span class="no">Sull</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">&gt;</span>
<span class="o">&gt;&gt;</span> <span class="n">match</span><span class="o">.</span><span class="n">total_users</span> <span class="c1"># total users who have checked in using any service</span>
 <span class="o">=&gt;</span> <span class="mi">8710</span>
<span class="o">&gt;&gt;</span> <span class="n">match</span><span class="o">.</span><span class="n">total_reviews</span>
 <span class="o">=&gt;</span> <span class="mi">183</span>
<span class="o">&gt;&gt;</span> <span class="n">match</span><span class="o">.</span><span class="n">total_checkins</span>
 <span class="o">=&gt;</span> <span class="mi">8710</span>
<span class="o">&gt;&gt;</span> <span class="n">match</span><span class="o">.</span><span class="n">total_likes</span>
 <span class="o">=&gt;</span> <span class="mi">0</span>
<span class="o">&gt;&gt;</span> <span class="n">match</span><span class="o">.</span><span class="n">phone</span>
 <span class="o">=&gt;</span> <span class="mi">6468250812</span>
</pre></div>

<p>In this example, the average of the ratings from any of the sources (normalized to a 5 point scale) is used as the rating.  Each result has address information, rating information, "like" information, and other relevant info.  Businesses that are returned from each search are merged, with matching results squashed (based on name/location/phone/etc).</p>

<p>You only need to specify the config options for the services you actually want to query.  You can sign up for each at the following locations:</p>

<ul>
<li>Yelp: <a href="http://www.yelp.com/developers/getting_started">http://www.yelp.com/developers/getting_started</a>
</li>
<li>Google places: <a href="https://code.google.com/apis/console/b/0/">https://code.google.com/apis/console/b/0/</a>
</li>
<li>Foursquare: <a href="https://foursquare.com/oauth/">https://foursquare.com/oauth/</a>
</li>
</ul><h1>License</h1>

<p>The bizratr code is distributed under the GPLv3.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-19398875-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>